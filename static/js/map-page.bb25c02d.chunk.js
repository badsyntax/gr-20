(this["webpackJsonpgr-20"]=this["webpackJsonpgr-20"]||[]).push([[4],{215:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return i}));var a={a0:[1189,841],a1:[841,594],a2:[594,420],a3:[420,297],a4:[297,210],a5:[210,148]},r="startPoint",c="finishPoint",o="Start",i="Finish"},703:function(e,t,n){"use strict";n.r(t),n.d(t,"MapPage",(function(){return Ht}));var a=n(3),r=n(0),c=n.n(r),o=n(40),i=n(39),s=n(641),l=n(111),u=n(344),j=n(15),b=n(140),d=n(115),O=n(214),f=n(215),m=d.a.MULTI_LINE_STRING,p=d.a.POINT,x=function(e){return Math.round(e[2])},h=function(e){return{lonLat:Object(l.l)(e),hdms:function(e){var t=Object(l.l)(e);return Object(b.f)(t)}(e),elevation:x(e)}},g=function(e,t,n){var a=v(n.getSource().getFeatures());if(!a)throw new Error("unable to find multiLine feature in gpx vector layer");var r=a.getGeometry().getCoordinates()[0],c=y(e,a),o=y(t,a);return function(e){var t=e.reduce((function(t,n,a){if(a===e.length-1)return t;var r=e[a+1];t.distance+=new O.a([n,r]).getLength();var c=x(n),o=x(r)-c;return o<0?t.elevationGainDown+=Math.abs(o):t.elevationGainUp+=o,t}),{distance:0,elevationGainUp:0,elevationGainDown:0,distanceInKm:""});return t.distanceInKm=(t.distance/1e3).toFixed(2),t}(r.slice(c,o))},v=function(e){return e.find((function(e){return e.getGeometry().getType()===m}))},w=function(e){return e.filter((function(e){return e.getGeometry().getType()===p}))},y=function(e,t){var n=t.getGeometry().getCoordinates()[0],a=t.getGeometry().getClosestPoint(e.getGeometry().getCoordinates());return n.findIndex((function(e){return new O.a([e,a]).getLength()<50}))};function A(e){return e.getGeometry().getType()===d.a.POINT&&e.getId()!==f.d&&e.getId()!==f.a}var F=n(643),L=n(16),C=n(22),k=n(644),P=n(143),S=n(246),E=n(18),z=Object(r.memo)((function(e){var t=e.gpxUrl,n=e.vectorLayer,a=e.onReady,c=Object(j.b)();return Object(r.useEffect)((function(){c(Object(E.b)());var e=new k.a({readExtensions:function(e,t){t&&Object(C.a)(Array.from(t.getElementsByTagName("gr20"))).forEach((function(t){var n=t.getAttribute("name");if(n){var a=t.textContent;e.setProperties(Object(L.a)({},n,a))}}))}}),r=new S.a({url:t,format:e});return n.setSource(r),r.once("change",(function(){r.getState()===P.a.READY&&(c(Object(E.a)()),a(r))})),function(){r.dispose()}}),[c,t,a,n]),null})),I=n(247),R=n(156),G=n(216),N=n(196),U=n.p+"static/media/baseline-location_on-24px-yellow.1a07b598.svg",M=n(279),V=n(197),T=new I.a({anchor:[.5,1],src:U});function D(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Calibri,sans-serif",c=e.getProperties(),o=c.name,i=e.getGeometry().getType();switch(i){case d.a.POINT:var s=new M.a({text:o,font:"bold 13px ".concat(r),overflow:!1,offsetY:-10,offsetX:12,textAlign:"left",fill:new V.a({color:"#fff"}),stroke:new G.a({color:"#000",width:1})});return new N.b({image:n?T:void 0,text:t?s:void 0,zIndex:2});case d.a.MULTI_LINE_STRING:var l={stroke:new G.a({color:"rgba(0,60,136)",width:4}),zIndex:1};return new N.b(a?l:void 0);default:throw new Error("No styles for "+i.toString())}}var q=Object(r.memo)((function(e){var t=e.map,n=e.onSourceReady,c=e.onSelectPointFeature,o=e.gpxUrl,s=e.showMarkers,l=e.showRoute,u=e.selectedFeature,j=e.children,b=e.showFeatureLabels,d=void 0!==b&&b,O=Object(r.useState)([]),f=Object(i.a)(O,2),m=f[0],p=f[1],x=Object(r.useMemo)((function(){return new F.a({declutter:!1})}),[]),h=Object(r.useCallback)((function(e){var n;if("canvas"===(null===(n=e.originalEvent)||void 0===n?void 0:n.target).nodeName.toLowerCase()){var a=t.getEventPixel(e.originalEvent),r=[];t.forEachFeatureAtPixel(a,(function(e){r.push(e)}));var c=r.find(A);t.getTarget().style.cursor=c?"pointer":""}}),[t]),g=Object(r.useCallback)((function(e){var n=t.getFeaturesAtPixel(e.pixel,{hitTolerance:4}).find(A);n&&e.preventDefault(),c(n)}),[t,c]),v=Object(r.useCallback)((function(e){n(e);var t=e.getFeatures();p(w(t))}),[n]);return Object(r.useEffect)((function(){x.setStyle((function(e){return D(e,d,s,l)}))}),[d,s,l,x]),Object(r.useEffect)((function(){t.addLayer(x)}),[t,x]),Object(r.useEffect)((function(){var e,t;m.forEach((function(e){e.setStyle(D(e,d,s,l))})),null===u||void 0===u||null===(e=u.getStyle())||void 0===e||e.setImage(new I.a({anchor:[.5,1],src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAApCAMAAAARZLm4AAAACXBIWXMAAAAcAAAAHAAPAbmPAAAAaVBMVEUAAADqQzXqQzXqQzXqQzUAAAAAAADqQzXePzUAAADqQzXqQzXqQzUAAADmQzXqTzzqQzXqQzniSzzvSzzqQzU/GREAAADqRznqQzWmDQ2uFRXKLSXWNSm6HRm+IR22GRW6IRm2HRnaNSne5JaTAAAAGHRSTlMAzuqmkAYKSxkNV97GCH8NvjUREe8hFSkSl0uZAAABDklEQVR42u39V5LDIAxAAdDdE/fFJfX+h1xsEImxmN0LvC+LN8KoHID8j0aUTGtWiuakEqo9NDmoK9cH+PXjUqoDaOrzTs5YyOUagbu3aBT7KopLutfnw2Wepnnx4VavgOA+7TwhFkaW7nudHJBbGsnc9wPk7A6YkXDL5IGTvyRc+wL3+LqWhg9a3QH9bt5i3R3irYE5BPp9m+fb6sN8mwnTKGyfywWXwo4TTWWtnVmOyZzEp839Dl2L0BWdl+SnD+Rhd5PIDy2HegQJqD+ulqHs/KNYSk74RUsIgts0jjnXxj5FpX3xBXek3WQkUSrT41pJVFaZGc8lqyJyKIohIqXKxjGLXEtkpVQVcWd+AYihOu4Eb3/8AAAAAElFTkSuQmCC"})),null===u||void 0===u||null===(t=u.getStyle())||void 0===t||t.setZIndex(3)}),[m,t,u,d,s,l]),Object(r.useEffect)((function(){return t.on(R.a.POINTERMOVE,h),t.on(R.a.CLICK,g),function(){t.un(R.a.POINTERMOVE,h),t.un(R.a.CLICK,g)}}),[t,g,h]),Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(z,{gpxUrl:o,vectorLayer:x,onReady:v}),j&&j(x)]})})),X=n(687),Q=n(382),W=n.n(Q),B=n(6),K=Object(r.memo)((function(e){e.map,e.source,Object(B.a)(e,["map","source"]);return Object(a.jsx)(r.Fragment,{})})),H=n(119),Z=n(217),Y=n(193),J=n(714),_=n(681),$=Object(r.memo)(Object(r.forwardRef)((function(e,t){var n=e.children,r=e.label,c=e.tooltipPlacement,o=void 0===c?"bottom":c,i=Object(B.a)(e,["children","label","tooltipPlacement"]),s=Object(a.jsx)(_.a,Object(H.a)(Object(H.a)({},i),{},{"aria-label":r,ref:t,children:n}));return r?Object(a.jsx)(J.a,{title:r,placement:o,arrow:!0,children:s}):s}))),ee=n.p+"static/media/baseline-my_location-24px-yellow.bf46ab87.svg",te=n(385),ne=n.n(te),ae="mylocation_layer",re="mylocation_feature",ce=function(e){var t=e.map,n=Object(B.a)(e,["map"]),c=Object(j.b)(),o=Object(r.useMemo)((function(){var e=new Z.a({name:"My Location"});return e.setId(re),e.setStyle(new N.b({image:new I.a({anchor:[.5,.5],src:ee})})),e}),[]),i=Object(r.useMemo)((function(){var e=new F.a({source:new S.a({features:[o]})});return e.set("id",ae),e}),[o]);Object(r.useEffect)((function(){return function(){t.removeLayer(i)}}),[o,i,t]);var s=function(e){c(Object(E.a)());var n=Object(l.d)([e.coords.longitude,e.coords.latitude]);i.getSource().getFeatureById(re).setGeometry(new Y.a(n)),t.getView().animate({center:n,duration:1e3})};return Object(a.jsx)($,Object(H.a)(Object(H.a)({onClick:function(){"geolocation"in navigator?(c(Object(E.b)()),function(e,t){return e.getLayers().getArray().find((function(e){return e.get("id")===t}))}(t,ae)||t.addLayer(i),navigator.geolocation.getCurrentPosition(s)):alert("Geolocation is not supported in your browser")}},n),{},{children:Object(a.jsx)(ne.a,{})}))},oe=n(286),ie=n.n(oe),se=n(288),le=n(384),ue=n.n(le),je=function(e){var t=e.map,r=Object(B.a)(e,["map"]),c=Object(j.b)(),o=function(){var e=Object(se.a)(ie.a.mark((function e(){var a,r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(Object(E.b)()),e.next=3,Promise.all([n.e(13),n.e(6)]).then(n.bind(null,702));case 3:return a=e.sent,r=a.exportMapToPDF,e.next=7,r(t);case 7:e.sent.save("map.pdf"),c(Object(E.a)());case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)($,Object(H.a)(Object(H.a)({onClick:o},r),{},{children:Object(a.jsx)(ue.a,{})}))},be=n(383),de=n.n(be),Oe=function(e){var t=e.map,n=Object(B.a)(e,["map"]);return Object(a.jsx)($,Object(H.a)(Object(H.a)({onClick:function(){t.getView().fit([978823.488305482,5121096.608475749,1039463.1111227559,5245134.752643153],{duration:1e3})}},n),{},{children:Object(a.jsx)(de.a,{})}))},fe=n(284),me=n.n(fe),pe=Object(r.memo)((function(e){var t=e.map,n=Object(B.a)(e,["map"]);return Object(a.jsx)($,Object(H.a)(Object(H.a)({},n),{},{tooltipPlacement:"left",onClick:function(){t.getView().animate({zoom:t.getView().getZoom()+.5,duration:250})},children:Object(a.jsx)(me.a,{})}))})),xe=n(387),he=n.n(xe),ge=Object(r.memo)((function(e){var t=e.map,n=Object(B.a)(e,["map"]);return Object(a.jsx)($,Object(H.a)(Object(H.a)({},n),{},{tooltipPlacement:"left",onClick:function(){t.getView().animate({zoom:t.getView().getZoom()-.5,duration:250})},children:Object(a.jsx)(he.a,{})}))})),ve=n(386),we=n.n(ve),ye=n(48),Ae=n(696),Fe=n(715),Le=n(705),Ce=n(716),ke=n(49),Pe=n(698),Se=n(709),Ee=n(697),ze=n(95),Ie=n(712),Re=Object(ze.a)((function(e){return Object(Ie.a)({root:{overflow:"auto",padding:e.spacing(3),textAlign:"rtl"===e.direction?"right":"left",width:320},formControl:{display:"block",marginBottom:e.spacing(2),"&:last-child":{marginBottom:0}},selectPaper:{left:"".concat(e.spacing(2),"px !important"),maxHeight:"none !important",top:"".concat(e.spacing(2),"px !important")}})})),Ge=n(682),Ne=n(43),Ue=function(){var e=Re(),t=Object(j.c)((function(e){return e.settings})),n=Object(j.c)((function(e){return e.spinner})).isVisible,r=Object(j.b)(),c=function(e){var t=e.target,n=t.name,a=t.type,c=t.checked,o=t.value;n&&r(Object(ye.b)(Object(L.a)({},n,"checkbox"===a?c:o)))};return Object(a.jsxs)(Ge.a,{className:e.root,children:[Object(a.jsxs)(Ae.a,{variant:"outlined",margin:"normal",fullWidth:!0,children:[Object(a.jsx)(Fe.a,{children:"Route"}),Object(a.jsx)(Le.a,{value:t.gpxUrl,label:"Route",name:"gpxUrl",onChange:c,disabled:n,MenuProps:{classes:{paper:e.selectPaper},disablePortal:!0},children:ke.a.map((function(e){return Object(a.jsx)(Ce.a,{value:e.url,children:e.name})}))})]}),Object(a.jsxs)(Ae.a,{variant:"outlined",margin:"normal",fullWidth:!0,children:[Object(a.jsx)(Fe.a,{children:"Layer"}),Object(a.jsx)(Le.a,{value:t.mapUrl,label:"Layer",name:"mapUrl",onChange:c,disabled:n,MenuProps:{classes:{paper:e.selectPaper},disablePortal:!0},children:Ne.map((function(e){return Object(a.jsx)(Ce.a,{value:e.url,children:e.name})}))})]}),Object(a.jsx)(Ae.a,{margin:"dense",fullWidth:!0,children:Object(a.jsxs)(Ee.a,{children:[Object(a.jsx)(Pe.a,{disabled:n,control:Object(a.jsx)(Se.a,{onChange:c,name:"showMarkers",color:"primary",checked:t.showMarkers}),label:"Show Markers"},"show-markers"),Object(a.jsx)(Pe.a,{disabled:n,control:Object(a.jsx)(Se.a,{onChange:c,name:"showRoute",color:"primary",checked:t.showRoute}),label:"Show Route"},"show-route"),Object(a.jsx)(Pe.a,{disabled:n,control:Object(a.jsx)(Se.a,{onChange:c,name:"showFeatureLabels",color:"primary",checked:t.showFeatureLabels}),label:"Show Point Labels"},"show-point-labels")]})})]})},Me=n(688),Ve=n(695),Te=Object(ze.a)((function(e){return Object(Ie.a)({root:{display:"inline-flex"},popover:{marginTop:e.spacing(2)},typography:{padding:e.spacing(2)}})})),De=n(689),qe=function(e){var t=Object.assign({},e),n=Te(),c=Object(r.useRef)(null),o=Object(r.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(a.jsx)(Ve.a,{onClickAway:function(){u(!1)},children:Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)($,Object(H.a)(Object(H.a)({},t),{},{ref:c,onClick:function(e){u(!l)},children:Object(a.jsx)(we.a,{})})),Object(a.jsx)(Me.a,{open:l,anchorEl:c.current,className:n.popover,children:function(e){var t=e.TransitionProps;return Object(a.jsx)(De.a,Object(H.a)(Object(H.a)({},t),{},{in:l,timeout:100,children:Object(a.jsx)("div",{children:Object(a.jsx)(Ue,{})})}))}})]})})},Xe=Object(ze.a)((function(e){return Object(Ie.a)({actionsContainer:{position:"fixed",right:e.spacing(1),top:e.spacing(1),zIndex:1},zoomContainer:{position:"fixed",right:e.spacing(1),bottom:e.spacing(1),zIndex:1},buttonGroup:{background:e.palette.common.white,margin:e.spacing(1)},buttonGroupVertical:{display:"flex",marginBottom:e.spacing(2)}})})),Qe=n(679),We=function(e){var t=e.map,n=e.source,c=Xe();return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(Qe.a,{in:!0,timeout:800,children:Object(a.jsxs)("div",{className:c.actionsContainer,children:[Object(a.jsxs)(X.a,{orientation:"horizontal",variant:"text",className:c.buttonGroup,children:[Object(a.jsx)(Oe,{label:"Fit Extent",map:t}),Object(a.jsx)(je,{label:"Export to PDF",map:t}),Object(a.jsx)(K,{label:"Download Route and Maps",source:n,map:t}),Object(a.jsx)(ce,{label:"Show My Location",map:t})]}),Object(a.jsx)(X.a,{orientation:"horizontal",variant:"text",className:c.buttonGroup,children:Object(a.jsx)(qe,{label:"Settings"})})]})}),Object(a.jsx)(Qe.a,{in:!0,timeout:800,children:Object(a.jsx)("div",{className:c.zoomContainer,children:Object(a.jsxs)(X.a,{orientation:"vertical",variant:"text",className:W()(c.buttonGroup,c.buttonGroupVertical),children:[Object(a.jsx)(pe,{label:"Zoom In",map:t}),Object(a.jsx)(ge,{label:"Zoom Out",map:t})]})})})]})},Be=n(282),Ke=n(25),He=n(647),Ze=n(645),Ye=n(646),Je=n(642),_e=n(291),$e=Ne.map((function(e){var t=e.url;return Object(_e.b)(t)})).flat(),et=function(e){Object(He.a)(n,e);var t=Object(Ze.a)(n);function n(e){var a;return Object(Be.a)(this,n),(a=t.call(this,e)).xyzSource=void 0,a.rasterLayer=void 0,a.xyzSource=new Je.a,a.rasterLayer=new Ye.a({source:a.xyzSource}),a.rasterLayer.set("id","osm-tile-layer"),a}return Object(Ke.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.map,n=e.mapUrl;t.addLayer(this.rasterLayer),this.xyzSource.setUrl(n)}},{key:"componentDidUpdate",value:function(){var e=this.props.mapUrl;this.xyzSource.setUrl(e)}},{key:"componentWillUnmount",value:function(){this.props.map.removeLayer(this.rasterLayer)}},{key:"render",value:function(){return Object(a.jsx)(o.a,{children:$e.map((function(e){return Object(a.jsx)("link",{href:new URL(e).origin,rel:"preconnect"},e)}))})}}]),n}(r.Component),tt=Object(ze.a)((function(e){return Object(Ie.a)({root:{height:"100%"}})})),nt=n(711),at=n(139),rt=n(684),ct=n(680),ot=n(686),it=n(704),st=n(690),lt=n(691),ut=n(693),jt=n(692),bt=Object(r.memo)((function(e){var t=e.feature,n=h(t.getGeometry().getCoordinates()),r=n.lonLat,c=n.hdms,o=n.elevation,i=(r[0]||0).toFixed(6),s=(r[1]||0).toFixed(6);return Object(a.jsx)(st.a,{children:Object(a.jsxs)(lt.a,{children:[Object(a.jsxs)(jt.a,{children:[Object(a.jsx)(ut.a,{children:"Elevation:"}),Object(a.jsxs)(ut.a,{children:[o,"m"]})]}),Object(a.jsxs)(jt.a,{children:[Object(a.jsx)(ut.a,{children:"Longitude:"}),Object(a.jsx)(ut.a,{children:i})]}),Object(a.jsxs)(jt.a,{children:[Object(a.jsx)(ut.a,{children:"Latitude:"}),Object(a.jsx)(ut.a,{children:s})]}),Object(a.jsxs)(jt.a,{children:[Object(a.jsx)(ut.a,{children:"Coordinates:"}),Object(a.jsx)(ut.a,{children:c})]})]})})})),dt=n(381),Ot=n.n(dt),ft=Object(r.memo)((function(e){return Object(a.jsx)($,Object(H.a)(Object(H.a)({},e),{},{children:Object(a.jsx)(Ot.a,{})}))})),mt=n(380),pt=n.n(mt),xt=Object(r.memo)((function(e){return Object(a.jsx)($,Object(H.a)(Object(H.a)({},e),{},{children:Object(a.jsx)(pt.a,{})}))})),ht=Object(r.memo)((function(e){var t=e.lonLat,n=e.map,r=Object(B.a)(e,["lonLat","map"]);return Object(a.jsx)($,Object(H.a)(Object(H.a)({},r),{},{onClick:function(){n.getView().animate({center:Object(l.d)(t),zoom:18,duration:800})},children:Object(a.jsx)(me.a,{})}))})),gt=n(683);function vt(){return(vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function wt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var yt=r.createElement("path",{d:"M12 7C6.48 7 2 9.24 2 12c0 2.24 2.94 4.13 7 4.77V20l4-4-4-4v2.73c-3.15-.56-5-1.9-5-2.73 0-1.06 3.04-3 8-3s8 1.94 8 3c0 .73-1.46 1.89-4 2.53v2.05c3.53-.77 6-2.53 6-4.58 0-2.76-4.48-5-10-5z"}),At=r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"});function Ft(e,t){var n=e.title,a=e.titleId,c=wt(e,["title","titleId"]);return r.createElement("svg",vt({fill:"currentColor",width:"1.2em",height:"1.2em",viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,yt,At)}var Lt=r.forwardRef(Ft),Ct=(n.p,Object(ze.a)({iframe:{width:"100%",position:"absolute",top:0,left:380,right:0,height:"100%"}})),kt=function(e){e.pointName;var t=e.embedUrl,n=Object(B.a)(e,["pointName","embedUrl"]),c=Ct(),o=Object(r.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)($,Object(H.a)(Object(H.a)({},n),{},{onClick:function(){u(!l)},children:Object(a.jsx)(Lt,{})})),l&&Object(a.jsx)(gt.a,{container:document.body,children:Object(a.jsx)("iframe",{title:"Google Maps 360",src:t,frameBorder:"0",style:{border:0},allowFullScreen:!0,className:c.iframe})})]})},Pt=Object(ze.a)((function(e){return Object(Ie.a)({root:{}})})),St=function(e){var t=e.map,n=e.prevFeature,r=e.nextFeature,c=e.feature,o=e.selectFeature,i=Pt(),s=c.getProperties(),l=s.name,u=s.google360Url,j=h(c.getGeometry().getCoordinates()).lonLat;return Object(a.jsxs)(X.a,{size:"large",variant:"text",orientation:"horizontal",className:i.root,fullWidth:!0,disableElevation:!0,children:[Object(a.jsx)(ht,{lonLat:j,map:t,label:"Zoom to Point"}),Object(a.jsx)(xt,{onClick:function(){n&&o(n)},label:"Previous Point",disabled:!n}),Object(a.jsx)(ft,{onClick:function(){r&&o(r)},label:"Next Point",disabled:!r}),Object(a.jsx)(kt,{label:"View 360",pointName:l,embedUrl:u,disabled:!u})]})},Et=n(706),zt=n(694),It=Object(r.memo)((function(e){var t=e.children,n=e.value,r=e.index,c=Object(B.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(H.a)(Object(H.a)({role:"tabpanel",hidden:n!==r,id:"scrollable-auto-tabpanel-".concat(r),"aria-labelledby":"scrollable-auto-tab-".concat(r)},c),{},{children:n===r&&t}))})),Rt=Object(r.memo)((function(e){var t=e.feature,n=e.nextFeature,r=e.gpxVectorLayer,c=g(t,n,r);return Object(a.jsx)(st.a,{children:Object(a.jsxs)(lt.a,{children:[Object(a.jsxs)(jt.a,{children:[Object(a.jsx)(ut.a,{children:"Distance:"}),Object(a.jsxs)(ut.a,{children:[c.distanceInKm,"km"]})]}),Object(a.jsxs)(jt.a,{children:[Object(a.jsx)(ut.a,{children:"Elevation gain:"}),Object(a.jsxs)(ut.a,{children:[c.elevationGainUp,"m"]})]}),Object(a.jsxs)(jt.a,{children:[Object(a.jsx)(ut.a,{children:"Elevation loss:"}),Object(a.jsxs)(ut.a,{children:[c.elevationGainDown,"m"]})]})]})})})),Gt=Object(r.memo)((function(e){var t=e.feature,n=e.nextFeature,o=e.prevFeature,s=e.gpxVectorLayer,l=c.a.useState(n?0:o?1:-1),u=Object(i.a)(l,2),j=u[0],b=u[1];return Object(r.useEffect)((function(){b(n?0:o?1:-1)}),[n,o]),Object(a.jsxs)(r.Fragment,{children:[Object(a.jsxs)(Et.a,{value:j,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",onChange:function(e,t){b(t)},children:[Object(a.jsx)(zt.a,{label:"Next Point",disabled:!n}),Object(a.jsx)(zt.a,{label:"Prev Point",disabled:!o})]}),Object(a.jsx)(It,{value:j,index:0,children:n&&Object(a.jsx)(Rt,{gpxVectorLayer:s,feature:t,nextFeature:n})}),Object(a.jsx)(It,{value:j,index:1,children:o&&Object(a.jsx)(Rt,{gpxVectorLayer:s,feature:o,nextFeature:t})})]})})),Nt=n(377),Ut=n.n(Nt),Mt=Object(ze.a)((function(e){return Object(Ie.a)({toolbar:{display:"flex",justifyContent:"space-between"},drawer:{width:380},drawerPaper:{width:380,boxShadow:e.shadows[24]}})})),Vt=n(685),Tt=function(e){var t=e.isOpen,n=e.feature,r=e.nextFeature,c=e.prevFeature,o=e.map,i=e.onClose,s=e.selectFeature,l=e.gpxVectorLayer,u=Mt(),j=Object(at.a)(),b=n.getProperties().name,d=void 0!==window?function(){return window.document.body}:void 0;return Object(a.jsx)("nav",{className:u.drawer,"aria-label":"waypoint",children:Object(a.jsxs)(nt.a,{container:d,anchor:"rtl"===j.direction?"right":"left",variant:"persistent",open:t,onClose:i,classes:{paper:u.drawerPaper},ModalProps:{keepMounted:!0},elevation:16,children:[Object(a.jsxs)(rt.a,{className:u.toolbar,children:[Object(a.jsx)(ct.a,{variant:"h6",children:b}),Object(a.jsx)(Vt.a,{edge:"end",onClick:i,children:Object(a.jsx)(Ut.a,{})})]}),Object(a.jsx)(ot.a,{}),Object(a.jsx)(St,{feature:n,nextFeature:r,prevFeature:c,map:o,selectFeature:s}),Object(a.jsx)(ot.a,{}),Object(a.jsx)(it.a,{mb:2,children:Object(a.jsx)(bt,{feature:n})}),Object(a.jsx)(Gt,{feature:n,nextFeature:r,prevFeature:c,gpxVectorLayer:l})]})})};function Dt(e,t,n){var a=new Z.a({name:e});return a.setStyle(function(e,t){return new N.b({text:new M.a({text:e,font:"bold 13px Calibri,sans-serif",overflow:!0,offsetY:10,fill:new V.a({color:t}),stroke:new G.a({color:"#000",width:1})})})}(e,n)),a.setId(t),a}var qt=Object(r.memo)((function(e){var t=e.map,n=e.gpxVectorLayer,a=e.showMarkers,c=Object(r.useMemo)((function(){return new F.a}),[]),o=Object(r.useMemo)((function(){return new S.a}),[]),i=Object(r.useCallback)((function(e){c.setVisible(e)}),[c]),s=Object(r.useCallback)((function(e){var t,n=null===(t=v(e.getFeatures()))||void 0===t?void 0:t.getGeometry();if(n){var a=Dt(f.e,f.d,"#FFF");a.setGeometry(new Y.a(n.getFirstCoordinate()));var r=Dt(f.b,f.a,"#FFF");r.setGeometry(new Y.a(n.getLastCoordinate())),o.addFeatures([a,r]),i(!0)}}),[o,i]),l=Object(r.useCallback)((function(){var e=n.getSource();e.getState()===P.a.READY&&e.getFeatures().length&&s(e)}),[s,n]);return Object(r.useEffect)((function(){c.setSource(o)}),[o,c]),Object(r.useEffect)((function(){return c.setZIndex(2),t.addLayer(c),function(){t.removeLayer(c)}}),[t,c]),Object(r.useEffect)((function(){return i(!1),n.once("postrender",l),function(){return n.un("postrender",l)}}),[n,l,i]),Object(r.useEffect)((function(){i(a)}),[a,i]),null})),Xt=42.184207,Qt=9.1079,Wt=10,Bt=function(e){e.children;var t=tt(),n=Object(r.createRef)(),c=Object(r.useState)(!1),o=Object(i.a)(c,2),b=o[0],d=o[1],O=Object(r.useState)(),f=Object(i.a)(O,2),m=f[0],p=f[1],x=Object(r.useState)(),h=Object(i.a)(x,2),g=h[0],A=h[1],F=Object(j.c)((function(e){return e.settings})),L=F.mapUrl,C=F.gpxUrl,k=F.showControls,P=F.showMarkers,S=F.showRoute,E=F.showFeatureLabels,z=Object(r.useMemo)((function(){return new s.a({pixelRatio:1,controls:[]})}),[]),I=m&&g&&function(e,t){var n=t.indexOf(e);return t[n+1]}(m,g),R=m&&g&&function(e,t){var n=t.indexOf(e);return t[n-1]}(m,g),G=function(){p(void 0),d(!1)};Object(r.useEffect)((function(){var e=Xt,t=Qt,a=Wt,r=n.current;if(r){var c=new u.a({center:Object(l.d)([t,e]),zoom:a});z.setTarget(r),z.setView(c)}}),[]);var N=Object(r.useCallback)((function(e){var t=function(e){var t=w(e.getFeatures()),n=v(e.getFeatures());if(!n)throw new Error("getSortedPointFeatures: unable to find multiLine feature in gpx vector layer");return t.map((function(e){return{featurePoint:e,index:y(e,n)}})).sort((function(e,t){return e.index-t.index})).map((function(e){return e.featurePoint}))}(e);A(t)}),[]);return Object(a.jsxs)("div",{className:t.root,ref:n,children:[Object(a.jsx)(q,{gpxUrl:C,showMarkers:P,showRoute:S,showFeatureLabels:E,onSourceReady:N,map:z,onSelectPointFeature:function(e){p(e),d(!!e)},selectedFeature:m,children:function(e){return Object(a.jsxs)(r.Fragment,{children:[m&&Object(a.jsx)(Tt,{isOpen:b,feature:m,nextFeature:I,prevFeature:R,selectFeature:p,onClose:G,map:z,gpxVectorLayer:e}),k&&Object(a.jsx)(We,{map:z,source:e.getSource()}),Object(a.jsx)(qt,{map:z,gpxVectorLayer:e,showMarkers:P})]})}}),Object(a.jsx)(et,{map:z,mapUrl:L})]})},Kt=Object(ze.a)((function(e){return Object(Ie.a)({content:{position:"fixed",width:"100%",height:"100%"}})})),Ht=function(){var e=Kt();return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(o.a,{children:Object(a.jsx)("title",{children:"GR-20 - The Route"})}),Object(a.jsx)("main",{className:e.content,children:Object(a.jsx)(Bt,{})})]})}}}]);
//# sourceMappingURL=map-page.bb25c02d.chunk.js.map