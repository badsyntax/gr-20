(this["webpackJsonpgr-20"]=this["webpackJsonpgr-20"]||[]).push([[6],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return j})),n.d(t,"g",(function(){return b})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return O})),n.d(t,"f",(function(){return p})),n.d(t,"h",(function(){return x}));var r=n(96),c=n(72),a=n(175),o=n(67),i=c.a.MULTI_LINE_STRING,s=c.a.POINT,l=function(e){return Math.round(e[2])},u=function(e){return{lonLat:Object(o.l)(e),hdms:function(e){var t=Object(o.l)(e);return Object(r.f)(t)}(e),elevation:l(e)}},j=function(e,t){var n=t.indexOf(e);return t[n+1]},b=function(e,t){var n=t.indexOf(e);return t[n-1]},d=function(e,t,n){var r=O(n.getSource().getFeatures());if(!r)throw new Error("unable to find multiLine feature in gpx vector layer");var c=r.getGeometry().getCoordinates()[0],o=h(e,r),i=h(t,r);return function(e){var t=e.reduce((function(t,n,r){if(r===e.length-1)return t;var c=e[r+1];t.distance+=new a.a([n,c]).getLength();var o=l(n),i=l(c)-o;return i<0?t.elevationGainDown+=Math.abs(i):t.elevationGainUp+=i,t}),{distance:0,elevationGainUp:0,elevationGainDown:0,distanceInKm:""});return t.distanceInKm=(t.distance/1e3).toFixed(2),t}(c.slice(o,i))},f=function(e,t){return e.getLayers().getArray().find((function(e){return e.get("id")===t}))},O=function(e){return e.find((function(e){return e.getGeometry().getType()===i}))},p=function(e){return e.filter((function(e){return e.getGeometry().getType()===s}))},h=function(e,t){var n=t.getGeometry().getCoordinates()[0],r=t.getGeometry().getClosestPoint(e.getGeometry().getCoordinates());return n.findIndex((function(e){return new a.a([e,r]).getLength()<50}))},x=function(e){var t=p(e.getFeatures()),n=O(e.getFeatures());if(!n)throw new Error("getSortedPointFeatures: unable to find multiLine feature in gpx vector layer");return t.map((function(e){return{featurePoint:e,index:h(e,n)}})).sort((function(e,t){return e.index-t.index})).map((function(e){return e.featurePoint}))}},184:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return a}));var r="all",c="current",a={a0:[1189,841],a1:[841,594],a2:[594,420],a3:[420,297],a4:[297,210],a5:[210,148]}},246:function(e,t,n){e.exports={ControlButton:"ControlButton_ControlButton__3stTO",ControlButton__container:"ControlButton_ControlButton__container__3bvxv",ControlButton__close:"ControlButton_ControlButton__close__2X7iC","ControlButton__close-button":"ControlButton_ControlButton__close-button__w3FfZ"}},262:function(e,t,n){e.exports={table:"PointData_table__n_vwp"}},337:function(e,t,n){e.exports={MapPage:"MapPage_MapPage__2ScJA"}},339:function(e,t,n){e.exports={DropdownGroup:"DropdownGroup_DropdownGroup__14KIR"}},369:function(e,t,n){e.exports={Map:"Map_Map__3R7Yv"}},370:function(e,t,n){e.exports={MapControls:"MapControls_MapControls__sDdcj","MapControls__button-control":"MapControls_MapControls__button-control__1zU34"}},382:function(e,t,n){e.exports={Popup:"Popup_Popup__26Fqg","Popup__button-control":"Popup_Popup__button-control__12RRG"}},386:function(e,t,n){e.exports={"tab-pane":"PopupBody_tab-pane__BNpHb"}},390:function(e,t,n){e.exports={footer:"PopupFooter_footer__1E23m"}},674:function(e,t,n){"use strict";n.r(t),n.d(t,"MapPage",(function(){return yn}));var r=n(4),c=n(0),a=n.n(c),o=n(23),i=n(104),s=n(72),l=n(661),u=n(114),j=n(67),b=n(316),d=n(11),f=n(106),O=n(663),p=n(144),h=n(667),x=n(665),m=n(98),v=n(207),g=n(12),y=Object(c.memo)((function(e){var t=e.gpxUrl,n=e.vectorLayer,r=e.onReady,a=Object(d.b)();return Object(c.useEffect)((function(){a(Object(g.b)());var e=new x.a({readExtensions:function(e,t){t&&Object(h.a)(Array.from(t.getElementsByTagName("gr20"))).forEach((function(t){var n=t.getAttribute("name");if(n){var r=t.textContent;e.setProperties(Object(p.a)({},n,r))}}))}}),c=new v.a({url:t,format:e});return n.setSource(c),c.once("change",(function(){c.getState()===m.a.READY&&(a(Object(g.a)()),r(c))})),function(){c.dispose()}}),[a,t,r,n]),null})),w=n(318),C=n(147),_=n(172),P=n(146),F={Point:new P.b({image:new w.a({fill:new C.a({color:"rgb(255,255,0,1)"}),stroke:new _.a({color:"rgba(0,60,136)",width:1}),radius:5})}),MultiLineString:new P.b({stroke:new _.a({color:"rgba(0,60,136)",width:4})})},k=new O.a;k.set("id","gpx-vector-layer"),k.setStyle((function(e){var t=e.getGeometry().getType().toString();return F[t]}));var L=Object(c.memo)((function(e){var t=e.map,n=e.onSourceReady,a=e.gpxUrl,o=e.showMarkers,s=e.showRoute,l=e.children,u=Object(c.useState)([]),j=Object(i.a)(u,2),b=j[0],d=j[1],O=Object(c.useState)(),p=Object(i.a)(O,2),h=p[0],x=p[1],m=Object(c.useCallback)((function(e){var t=k.getSource();e?Object(f.f)(t.getFeatures()).length||b.forEach((function(e){t.addFeature(e)})):b.forEach((function(e){return t.removeFeature(e)}))}),[b]),v=Object(c.useCallback)((function(e){if(h)if(e){var t=k.getSource();Object(f.d)(t.getFeatures())||k.getSource().addFeature(h)}else k.getSource().removeFeature(h)}),[h]),g=Object(c.useCallback)((function(e){n(e);var t=e.getFeatures();d(Object(f.f)(t)),x(Object(f.d)(t))}),[n]);return Object(c.useEffect)((function(){t.addLayer(k)}),[t]),Object(c.useEffect)((function(){m(o)}),[o,m]),Object(c.useEffect)((function(){v(s)}),[s,v]),Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(y,{gpxUrl:a,vectorLayer:k,onReady:g}),l&&l(k)]})})),E=n(80),N=n(101),S=n.n(N),M=n(157),R=n.n(M),G=n(158),D=n(95),U=n(170),B=n(371),I=n.n(B),T=n(246),V=n.n(T),A=S.a.bind(V.a),z=Object(c.memo)((function(e){var t=e.children,n=e.onClick,a=e.className,o=e.buttonClassName,s=e.tooltip,l=e.tooltipPlacement,u=void 0===l?"bottom":l,j=Object(D.a)(e,["children","onClick","className","buttonClassName","tooltip","tooltipPlacement"]),b=Object(c.useState)(!1),d=Object(i.a)(b,2),f=d[0],O=d[1],p=Object(c.useRef)(null);Object(c.useEffect)((function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.addEventListener("click",n);var t=null===p||void 0===p?void 0:p.current;return function(){null===t||void 0===t||t.removeEventListener("click",n)}}));return Object(r.jsxs)("div",{className:A(V.a.ControlButton__container,a),children:[Object(r.jsx)("button",Object(E.a)(Object(E.a)({className:A(V.a.ControlButton,o),type:"button",ref:p},j),{},{children:t})),s&&p.current&&Object(r.jsx)(I.a,{placement:u,isOpen:f,target:p.current,toggle:function(){O(!f)},delay:{show:0,hide:0},modifiers:{offset:{offset:"0,5"}},children:s})]})})),X=n(209),K=n.n(X),W="checkbox",Y=n(255),Z=n.n(Y),J=n(254),H=n.n(J),q=n(256),Q=n.n(q),$=n(220),ee=n.n($),te=n(221),ne=n.n(te),re=n(222),ce=n.n(re),ae=n(380),oe=n.n(ae),ie=n(381),se=n.n(ie),le=n(219),ue=n.n(le),je=n(184),be=function(e){var t=e.map,a=e.source,o=Object(D.a)(e,["map","source"]),s=Object(c.useState)(!1),l=Object(i.a)(s,2),u=l[0],j=l[1],b=Object(c.useState)({includeGPX:!0,includePDF:!0,pdfOption:"all",pdfFormat:"a4",pdfResolution:150}),f=Object(i.a)(b,2),O=f[0],h=f[1],x=Object(d.b)(),m=function(e){var t=e.target,n=t.name,r=t.type,c=t.checked,a=t.value;!function(e,t){h(Object(E.a)(Object(E.a)({},O),{},Object(p.a)({},e,t)))}(n,r===W?c:a)},v=function(){var e=Object(G.a)(R.a.mark((function e(){var r,c,o,i,s,l,u;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(13),n.e(3)]).then(n.bind(null,673));case 2:return r=e.sent,c=r.downloadZipFile,o=O.pdfFormat,i=O.pdfResolution,s=O.includePDF,l=O.includeGPX,u=O.pdfOption,e.next=7,c(t,a,l,s,o,i,u,(function(){return x(Object(g.b)())}),(function(){return x(Object(g.a)())}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){j(!u)};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(z,Object(E.a)(Object(E.a)({},o),{},{onClick:function(){j(!0)},tooltipPlacement:"right",children:Object(r.jsx)(U.c,{})})),Object(r.jsxs)(H.a,{isOpen:u,toggle:y,centered:!0,children:[Object(r.jsx)(Z.a,{toggle:y,children:"Download Options"}),Object(r.jsx)(Q.a,{children:Object(r.jsxs)(K.a,{children:[Object(r.jsxs)(ee.a,{children:[Object(r.jsx)(ee.a,{check:!0,children:Object(r.jsxs)(ne.a,{check:!0,children:[Object(r.jsx)(ce.a,{type:"checkbox",name:"includeGPX",checked:O.includeGPX,onChange:m})," ","Include GPX"]})}),Object(r.jsx)(ee.a,{check:!0,children:Object(r.jsxs)(ne.a,{check:!0,children:[Object(r.jsx)(ce.a,{type:"checkbox",name:"includePDF",checked:O.includePDF,onChange:m})," ","Include PDF"]})}),O.includePDF&&Object(r.jsxs)(ee.a,{style:{paddingLeft:"1.5em"},children:[Object(r.jsxs)(ee.a,{row:!0,children:[Object(r.jsx)(ne.a,{for:"pdfFormat",sm:4,children:"Page size"}),Object(r.jsx)(oe.a,{sm:8,children:Object(r.jsxs)(ce.a,{type:"select",id:"pdfFormat",onChange:m,name:"pdfFormat",value:O.pdfFormat,children:[Object(r.jsx)("option",{value:"a0",children:"A0 (slow)"}),Object(r.jsx)("option",{value:"a1",children:"A1"}),Object(r.jsx)("option",{value:"a2",children:"A2"}),Object(r.jsx)("option",{value:"a3",children:"A3"}),Object(r.jsx)("option",{value:"a4",children:"A4"}),Object(r.jsx)("option",{value:"a5",children:"A5 (fast)"})]})})]}),Object(r.jsxs)(ee.a,{row:!0,children:[Object(r.jsx)(ne.a,{for:"pdfFormat",sm:4,children:"Resolution"}),Object(r.jsx)(oe.a,{sm:8,children:Object(r.jsxs)(ce.a,{type:"select",id:"pdfResolution",onChange:m,name:"pdfResolution",value:O.pdfResolution,children:[Object(r.jsx)("option",{value:"72",children:"72 dpi (fast)"}),Object(r.jsx)("option",{value:"150",children:"150 dpi"}),Object(r.jsx)("option",{value:"300",children:"300 dpi (slow)"})]})})]}),Object(r.jsxs)(ee.a,{row:!0,children:[Object(r.jsx)(ne.a,{sm:4,children:"Pages"}),Object(r.jsxs)(oe.a,{sm:8,children:[Object(r.jsx)(ee.a,{check:!0,children:Object(r.jsxs)(ne.a,{check:!0,children:[Object(r.jsx)(ce.a,{type:"radio",name:"pdfOption",value:je.b,checked:O.pdfOption===je.b,onChange:m})," ","All Stages"]})}),Object(r.jsx)(ee.a,{check:!0,children:Object(r.jsxs)(ne.a,{check:!0,children:[Object(r.jsx)(ce.a,{type:"radio",name:"pdfOption",value:je.c,checked:O.pdfOption===je.c,onChange:m})," ","Current View"]})})]})]})]})]}),O.includePDF&&O.pdfOption===je.b&&Object(r.jsx)(se.a,{color:"warning",children:"Please note it might take some time to generate the PDF."}),Object(r.jsx)(ue.a,{onClick:function(){j(!1),v()},disabled:!O.includeGPX&&!O.includePDF,children:"Download"})]})})]})]})},de=n(174),fe=n(151),Oe=n(317),pe=n(156),he=n.p+"static/media/baseline-my_location-24px-yellow.bf46ab87.svg",xe="mylocation_layer",me="mylocation_feature",ve=function(e){var t=e.map,n=Object(D.a)(e,["map"]),a=Object(d.b)(),o=Object(c.useMemo)((function(){var e=new de.a({name:"My Location"});return e.setId(me),e.setStyle(new P.b({image:new Oe.a({anchor:[.5,.5],src:he})})),e}),[]),i=Object(c.useMemo)((function(){var e=new O.a({source:new v.a({features:[o]})});return e.set("id",xe),e}),[o]);Object(c.useEffect)((function(){return function(){t.removeLayer(i)}}),[o,i,t]);var s=function(e){a(Object(g.a)());var n=Object(j.d)([e.coords.longitude,e.coords.latitude]);i.getSource().getFeatureById(me).setGeometry(new fe.a(n)),t.getView().animate({center:n,duration:1e3})};return Object(r.jsx)(z,Object(E.a)(Object(E.a)({tooltipPlacement:"right",onClick:function(){"geolocation"in navigator?(a(Object(g.b)()),Object(f.b)(t,xe)||t.addLayer(i),navigator.geolocation.getCurrentPosition(s)):alert("Geolocation is not supported in your browser")}},n),{},{children:Object(r.jsx)(pe.b,{})}))},ge=n(159),ye=function(e){var t=e.map,c=Object(D.a)(e,["map"]),a=Object(d.b)(),o=function(){var e=Object(G.a)(R.a.mark((function e(){var r,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Object(g.b)()),e.next=3,Promise.all([n.e(16),n.e(8)]).then(n.bind(null,400));case 3:return r=e.sent,c=r.exportMapToPDF,e.next=7,c(t);case 7:e.sent.save("map.pdf"),a(Object(g.a)());case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(z,Object(E.a)(Object(E.a)({tooltipPlacement:"right",onClick:o},c),{},{children:Object(r.jsx)(ge.c,{})}))},we=function(e){var t=e.map,n=Object(D.a)(e,["map"]);return Object(r.jsx)(z,Object(E.a)(Object(E.a)({tooltipPlacement:"right",onClick:function(){t.getView().fit([978823.488305482,5121096.608475749,1039463.1111227559,5245134.752643153],{duration:1e3})}},n),{},{children:Object(r.jsx)(pe.d,{})}))},Ce=n(155),_e=n(182),Pe=new(n(154).a),Fe=new Ce.a({collapsible:!0}),ke=new _e.a({units:"metric",minWidth:100}),Le=[Pe,Fe,ke],Ee=n(370),Ne=n.n(Ee),Se=S.a.bind(Ne.a),Me=function(e){var t=e.map,n=e.source,a=Object(c.createRef)();Object(c.useEffect)((function(){return Pe.setTarget(a.current),Le.forEach((function(e){return t.addControl(e)})),function(){Le.forEach((function(e){return t.removeControl(e)}))}}),[]);var o={map:t,className:Se("MapControls__button-control")};return Object(r.jsxs)("div",{className:Ne.a.MapControls,children:[Object(r.jsx)("div",{ref:a}),Object(r.jsx)(we,Object(E.a)({tooltip:"Fit Extent"},o)),Object(r.jsx)(ye,Object(E.a)({tooltip:"Export to PDF"},o)),Object(r.jsx)(be,Object(E.a)({tooltip:"Download Route and Maps",source:n},o)),Object(r.jsx)(ve,Object(E.a)({tooltip:"Show My Location"},o))]})},Re=n(383),Ge=n(257),De=n(384),Ue=n.n(De),Be=n(382),Ie=n.n(Be),Te=Object(c.memo)((function(e){return Object(r.jsx)(z,Object(E.a)(Object(E.a)({className:V.a.ControlButton__close,buttonClassName:V.a["ControlButton__close-button"]},e),{},{children:Object(r.jsx)(ge.d,{})}))})),Ve=Object(c.memo)((function(e){var t=e.lonLat,n=e.map,c=Object(D.a)(e,["lonLat","map"]);return Object(r.jsx)(z,Object(E.a)(Object(E.a)({},c),{},{onClick:function(){n.getView().animate({center:Object(j.d)(t),zoom:18,duration:800})},children:Object(r.jsx)(pe.c,{})}))}));function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ze(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var Xe=c.createElement("path",{d:"M12 7C6.48 7 2 9.24 2 12c0 2.24 2.94 4.13 7 4.77V20l4-4-4-4v2.73c-3.15-.56-5-1.9-5-2.73 0-1.06 3.04-3 8-3s8 1.94 8 3c0 .73-1.46 1.89-4 2.53v2.05c3.53-.77 6-2.53 6-4.58 0-2.76-4.48-5-10-5z"}),Ke=c.createElement("path",{fill:"none",d:"M0 0h24v24H0z"});function We(e,t){var n=e.title,r=e.titleId,a=ze(e,["title","titleId"]);return c.createElement("svg",Ae({fill:"currentColor",width:"1.2em",height:"1.2em",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,Xe,Ke)}var Ye=c.forwardRef(We),Ze=(n.p,function(e){var t=e.pointName,n=e.embedUrl,a=Object(D.a)(e,["pointName","embedUrl"]),o=Object(c.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1],j=function(){u(!l)};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(z,Object(E.a)(Object(E.a)({},a),{},{onClick:j,children:Object(r.jsx)(Ye,{})})),Object(r.jsxs)(H.a,{isOpen:l,toggle:j,centered:!0,style:{maxWidth:"800px"},children:[Object(r.jsxs)(Z.a,{toggle:j,children:[t," 360"]}),Object(r.jsx)(Q.a,{children:Object(r.jsx)("iframe",{title:"Google Maps 360",src:n,width:"100%",height:"450",frameBorder:"0",style:{border:0},allowFullScreen:!0})})]})]})}),Je=Object(c.memo)((function(e){return Object(r.jsx)(z,Object(E.a)(Object(E.a)({},e),{},{children:Object(r.jsx)(ge.b,{})}))})),He=Object(c.memo)((function(e){return Object(r.jsx)(z,Object(E.a)(Object(E.a)({},e),{},{children:Object(r.jsx)(ge.a,{})}))})),qe=n(390),Qe=n.n(qe),$e=S.a.bind(Qe.a),et=function(e){var t=e.map,n=e.lonLat,c=e.buttonClassName,a=e.onPrevPointButtonClick,o=e.onNextPointButtonClick,i=e.prevFeature,s=e.nextFeature,l=e.google360Url,u=e.name;return Object(r.jsxs)("footer",{className:$e("footer"),children:[Object(r.jsx)(Ve,{lonLat:n,map:t,tooltip:"Zoom to Point",className:c}),Object(r.jsx)(He,{onClick:a,tooltip:"Previous Point",className:c,disabled:!i}),Object(r.jsx)(Je,{onClick:o,tooltip:"Next Point",className:c,disabled:!s}),l&&u&&Object(r.jsx)(Ze,{tooltip:"View 360",pointName:u,embedUrl:l,className:c})]})},tt=n(262),nt=n.n(tt),rt=n(263),ct=n.n(rt),at=S.a.bind(nt.a),ot=Object(c.memo)((function(e){var t=e.feature,n=e.nextFeature,c=e.gpxVectorLayer,a=Object(f.c)(t,n,c);return Object(r.jsx)(ct.a,{borderless:!0,className:at("table"),children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:"Distance:"}),Object(r.jsxs)("td",{children:[a.distanceInKm,"km"]})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:"Elevation gain:"}),Object(r.jsxs)("td",{children:[a.elevationGainUp,"m"]})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:"Elevation loss:"}),Object(r.jsxs)("td",{children:[a.elevationGainDown,"m"]})]})]})})})),it=S.a.bind(nt.a),st=Object(c.memo)((function(e){var t=e.elevation,n=e.lon,c=e.lat,a=e.hdms;return Object(r.jsx)(ct.a,{borderless:!0,className:it("table"),children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:"Elevation:"}),Object(r.jsxs)("td",{children:[t,"m"]})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:"Longitude:"}),Object(r.jsx)("td",{children:n})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:"Latitude:"}),Object(r.jsx)("td",{children:c})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:"Coordinates:"}),Object(r.jsx)("td",{children:Object(r.jsx)("span",{className:it("coordinates"),children:a})})]})]})})})),lt=n(386),ut=n.n(lt),jt=n(387),bt=n.n(jt),dt=n(258),ft=n.n(dt),Ot=n(259),pt=n.n(Ot),ht=n(260),xt=n.n(ht),mt=n(388),vt=n.n(mt),gt=n(389),yt=n.n(gt),wt=S.a.bind(ut.a),Ct=function(e){var t=e.gpxVectorLayer,n=e.feature,a=e.nextFeature,o=e.prevFeature,s=e.elevation,l=e.lon,u=e.lat,j=e.hdms,b=e.scheduleUpdate,d=Object(c.useState)("1"),f=Object(i.a)(d,2),O=f[0],p=f[1],h=function(e){O!==e&&(p(e),b())};return Object(c.useEffect)((function(){p("1")}),[n]),Object(r.jsxs)(bt.a,{children:[Object(r.jsxs)(ft.a,{tabs:!0,children:[Object(r.jsx)(pt.a,{children:Object(r.jsx)(xt.a,{className:wt({active:"1"===O}),href:"#info",onClick:function(e){e.preventDefault(),h("1")},children:"Info"})}),a&&Object(r.jsx)(pt.a,{children:Object(r.jsx)(xt.a,{className:wt({active:"2"===O}),href:"next",onClick:function(e){e.preventDefault(),h("2")},children:"Next Point"})}),o&&Object(r.jsx)(pt.a,{children:Object(r.jsx)(xt.a,{className:wt({active:"3"===O}),href:"#prev",onClick:function(e){e.preventDefault(),h("3")},children:"Previous Point"})})]}),Object(r.jsxs)(vt.a,{activeTab:O,children:[Object(r.jsx)(yt.a,{tabId:"1",className:wt("tab-pane"),children:Object(r.jsx)(st,{elevation:s,lon:l,lat:u,hdms:j})}),a&&Object(r.jsx)(yt.a,{tabId:"2",className:wt("tab-pane"),children:Object(r.jsx)(ot,{gpxVectorLayer:t,feature:n,nextFeature:a})}),o&&Object(r.jsx)(yt.a,{tabId:"3",className:wt("tab-pane"),children:Object(r.jsx)(ot,{gpxVectorLayer:t,feature:o,nextFeature:n})})]})]})},_t=n(385),Pt=n.n(_t),Ft=function(e){var t=e.map,n=e.scheduleUpdate,a=e.onClose,o=e.gpxVectorLayer,i=e.feature,s=e.prevFeature,l=e.nextFeature,u=e.buttonClassName,j=e.coordinates,b=e.selectFeature,d=Object(f.a)(j),O=d.lonLat,p=d.hdms,h=d.elevation,x=i.getProperties(),m=x.name,v=x.google360Url,g=(O[0]||0).toFixed(6),y=(O[1]||0).toFixed(6);return Object(c.useEffect)((function(){n()}),[j,n]),Object(r.jsxs)(c.Fragment,{children:[Object(r.jsxs)(Pt.a,{children:[Object(r.jsx)(Te,{onClick:a}),Object(r.jsx)(pe.a,{size:20,style:{verticalAlign:"top"}})," ",m,!s&&" (Start)",!l&&" (Finish)"]}),Object(r.jsx)(Ct,{lon:g,lat:y,hdms:p,elevation:h,gpxVectorLayer:o,feature:i,nextFeature:l,prevFeature:s,scheduleUpdate:n}),Object(r.jsx)(et,{map:t,lonLat:O,name:m,nextFeature:l,prevFeature:s,buttonClassName:u,onPrevPointButtonClick:function(){s&&b(s)},onNextPointButtonClick:function(){l&&b(l)},google360Url:v})]})},kt=S.a.bind(Ie.a),Lt=function(e){var t=e.map,n=e.gpxVectorLayer,a=e.onClose,o=e.isOpen,i=e.feature,s=e.nextFeature,l=e.prevFeature,u=e.selectFeature,j=Object(c.useRef)(null),b=Object(c.useRef)(),d=i.getGeometry().getCoordinates();return Object(c.useEffect)((function(){b.current=new Re.a({element:j.current,positioning:Ge.a.CENTER_CENTER}),t.addOverlay(b.current)}),[t]),Object(c.useEffect)((function(){var e;null===(e=b.current)||void 0===e||e.setPosition(d),t.getView().animate({center:d,duration:800})}),[t,i,d]),Object(r.jsx)("div",{id:"popover-container",ref:j,children:Object(r.jsx)(Ue.a,{placement:"top",isOpen:o,target:j,container:j,className:kt("Popup"),modifiers:{hide:{enabled:!1},preventOverflow:{enabled:!1},flip:{enabled:!1}},children:function(e){var c=e.scheduleUpdate;return Object(r.jsx)(Ft,{map:t,onClose:a,gpxVectorLayer:n,feature:i,nextFeature:s,prevFeature:l,scheduleUpdate:c,coordinates:d,buttonClassName:kt("Popup__button-control"),selectFeature:u})}})})},Et=n(368),Nt=n.p+"static/media/baseline-location_on-24px-yellow.1a07b598.svg",St=function(e,t,n,r){var c=new de.a({name:e});return c.setStyle(function(e,t,n){return new P.b({image:new Oe.a({anchor:[.5,1],src:t}),text:new Et.a({text:e,fill:new C.a({color:n}),stroke:new _.a({color:"#ffffff",width:2}),font:"bold 13px Arial",offsetY:12})})}(e,r,n)),c.setId(t),c},Mt="startPoint",Rt="finishPoint",Gt=Object(c.memo)((function(e){var t=e.map,n=e.gpxVectorLayer,r=e.gpxUrl,a=e.showMarkers,o=Object(c.useRef)(),i=function(e){var t;null===(t=o.current)||void 0===t||t.setVisible(e)},s=function(){var e=n.getSource();if(e.getState()===m.a.READY&&e.getFeatures().length){var t,r,c=null===(t=Object(f.d)(e.getFeatures()))||void 0===t?void 0:t.getGeometry();if(!c)return;var a=St("Start",Mt,"rgba(0,60,136)",Nt);a.setGeometry(new fe.a(c.getFirstCoordinate()));var s=St("Finish",Rt,"rgba(0,60,136)",Nt);s.setGeometry(new fe.a(c.getLastCoordinate()));var l=new v.a({features:[a,s]});null===(r=o.current)||void 0===r||r.setSource(l),i(!0)}};return Object(c.useEffect)((function(){return o.current=new O.a,o.current.setZIndex(2),t.addLayer(o.current),function(){o.current&&t.removeLayer(o.current)}}),[]),Object(c.useEffect)((function(){return i(!1),n.once("change",s),function(){n.un("change",s)}}),[r]),Object(c.useEffect)((function(){i(a)}),[a]),null})),Dt=n(391),Ut=n(392),Bt=n(668),It=n(664),Tt=n(666),Vt=n(662),At=n(264),zt=n(25),Xt=zt.map((function(e){var t=e.url;return Object(At.b)(t)})).flat(),Kt=function(e){Object(Bt.a)(n,e);var t=Object(It.a)(n);function n(e){var r;return Object(Dt.a)(this,n),(r=t.call(this,e)).xyzSource=void 0,r.rasterLayer=void 0,r.xyzSource=new Vt.a,r.rasterLayer=new Tt.a({source:r.xyzSource}),r.rasterLayer.set("id","osmtilelayer"),r}return Object(Ut.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.map,n=e.mapUrl;t.addLayer(this.rasterLayer),this.xyzSource.setUrl(n)}},{key:"componentDidUpdate",value:function(){var e=this.props.mapUrl;this.xyzSource.setUrl(e)}},{key:"componentWillUnmount",value:function(){this.props.map.removeLayer(this.rasterLayer)}},{key:"render",value:function(){return Object(r.jsx)(o.a,{children:Xt.map((function(e){return Object(r.jsx)("link",{href:new URL(e).origin,rel:"preconnect"},e)}))})}}]),n}(c.Component),Wt=n(369),Yt=n.n(Wt),Zt=(n(367),42.184207),Jt=9.1079,Ht=9,qt=[u.a.POINTERDOWN];function Qt(e){return e.getGeometry().getType()===s.a.POINT&&e.getId()!==Mt&&e.getId()!==Rt}var $t=function(e){e.children;var t=a.a.createRef(),n=Object(c.useState)(!1),o=Object(i.a)(n,2),s=o[0],u=o[1],O=Object(c.useState)(),p=Object(i.a)(O,2),h=p[0],x=p[1],m=Object(c.useState)(),v=Object(i.a)(m,2),g=v[0],y=v[1],w=Object(d.c)((function(e){return e.settings})),C=w.mapUrl,_=w.gpxUrl,P=w.showControls,F=w.showMarkers,k=w.showRoute,E=Object(c.useMemo)((function(){return new l.a({pixelRatio:1,controls:[]})}),[]),N=h&&g&&Object(f.e)(h,g),S=h&&g&&Object(f.g)(h,g),M=Object(c.useCallback)((function(){u(!1)}),[]),R=function(e){var t;if("canvas"===(null===(t=e.originalEvent)||void 0===t?void 0:t.target).nodeName.toLowerCase()){var n=E.getEventPixel(e.originalEvent),r=[];E.forEachFeatureAtPixel(n,(function(e){r.push(e)}));var c=r.find(Qt);E.getTarget().style.cursor=c?"pointer":""}},G=function(e){var t,n=E.getFeaturesAtPixel(e.pixel,{hitTolerance:4});if(n&&n.length){var r=n.find(Qt);r&&(e.preventDefault(),x(r),u(!0))}else"canvas"===(null===(t=e.originalEvent)||void 0===t?void 0:t.target).nodeName.toLowerCase()&&u(!1)},D=Object(c.useCallback)((function(e){x(e)}),[]);Object(c.useEffect)((function(){var e=Zt,n=Jt,r=Ht,c=t.current;if(c){var a=new b.a({center:Object(j.d)([n,e]),zoom:r});E.setTarget(c),E.setView(a),E.on("pointermove",R)}return qt.forEach((function(e){return E.on(e,G)})),function(){c&&E.un("pointermove",R),qt.forEach((function(e){return E.un(e,G)}))}}),[]);var U=Object(c.useCallback)((function(e){var t=Object(f.h)(e);y(t)}),[]);return Object(r.jsxs)("div",{className:Yt.a.Map,ref:t,children:[Object(r.jsx)(L,{gpxUrl:_,showMarkers:F,showRoute:k,onSourceReady:U,map:E,children:function(e){return Object(r.jsxs)(c.Fragment,{children:[P&&Object(r.jsx)(Me,{map:E,source:e.getSource()}),Object(r.jsx)(Gt,{map:E,gpxVectorLayer:e,showMarkers:F,gpxUrl:_}),h&&Object(r.jsx)(Lt,{map:E,gpxVectorLayer:e,feature:h,nextFeature:N,prevFeature:S,isOpen:s,onClose:M,selectFeature:D})]})}}),Object(r.jsx)(Kt,{map:E,mapUrl:C})]})},en=n(26),tn=n(341),nn=n.n(tn),rn=n(340),cn=n.n(rn),an=n(366),on=n.n(an),sn=n(365),ln=n.n(sn),un=n(364),jn=n.n(un),bn=n(342),dn=n.n(bn),fn=function(e){var t=e.children,n=Object(c.useState)(!1),a=Object(i.a)(n,2),o=a[0],s=a[1];return Object(r.jsx)(dn.a,{isOpen:o,toggle:function(){s(!o)},onMouseEnter:function(){s(!0)},onMouseLeave:function(){s(!1)},children:t})},On=n(339),pn=n.n(On),hn=function(e){var t=e.onChange,n=e.options,c=e.values,a=function(e){var n=e.target,r=n.name,c=n.type,a=n.checked,o=n.value;t(r,c===W?a:o)};return Object(r.jsx)("form",{className:pn.a.DropdownGroup,children:Object(r.jsx)(cn.a,{children:Object(r.jsx)(nn.a,{children:n.map((function(e){var n=e.label,o=e.name,i=e.type,s=e.items;return Object(r.jsxs)(fn,{children:[Object(r.jsx)(jn.a,{caret:!0,color:"secondary",className:pn.a.DropDown,children:n}),Object(r.jsx)(ln.a,{right:!0,children:s.map((function(e){var n=e.name,s=e.label,l=e.url;return"formGroup"===i?Object(r.jsx)(on.a,{children:Object(r.jsx)(ee.a,{check:!0,children:Object(r.jsxs)(ne.a,{check:!0,onClick:function(e){e.stopPropagation()},children:[Object(r.jsx)(ce.a,{name:n,type:"checkbox",checked:!!c[n],onChange:a})," ",s]})})},n):Object(r.jsxs)(on.a,{onClick:function(){l&&t(o,l)},children:[l===c[o]?Object(r.jsx)(U.b,{}):Object(r.jsx)("span",{style:{paddingLeft:"1em",display:"inline-block"}})," ",n]},n)}))})]},n)}))})})})},xn=[{label:"Routes",name:"gpxUrl",items:n(27).a},{label:"Layers",name:"mapUrl",items:zt},{label:"Options",name:"options",type:"formGroup",items:[{name:"showControls",label:"Show controls"},{name:"showMarkers",label:"Show markers"},{name:"showRoute",label:"Show route"}]}],mn=function(){var e=Object(d.c)((function(e){return e.settings})),t=Object(d.b)();return Object(r.jsx)(hn,{options:xn,values:e,onChange:function(e,n){t(Object(en.b)(Object(p.a)({},e,n)))}})},vn=n(337),gn=n.n(vn),yn=function(){return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(o.a,{children:Object(r.jsx)("title",{children:"GR-20 - The Route"})}),Object(r.jsxs)("div",{className:gn.a.MapPage,children:[Object(r.jsx)(mn,{}),Object(r.jsx)($t,{})]})]})}}}]);
//# sourceMappingURL=map-page.071c4fb9.chunk.js.map